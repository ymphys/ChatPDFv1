# ChatPDFv1 – MinerU-Powered PDF Intelligence

ChatPDFv1 is a command-line workflow that turns any publicly available PDF into an insight-ready knowledge bundle. Give it a URL and it will:

- hand the document to the MinerU API to obtain a clean Markdown version (plus the original PDF) organised under `files/<slug>/`
- run a configurable OpenAI interpretation pass that answers research prompts and stores the results alongside the document
- keep traceable logs so you can audit every run

Use it to accelerate literature reviews, generate briefing notes, or bootstrap research assistants without manual conversion steps.

---

## Installation Instructions

1. **Clone the repository**
   ```bash
   git clone https://github.com/your-account/chatpdfv1.git
   cd chatpdfv1
   ```

2. **Create a virtual environment (optional but recommended)**
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # Windows: .venv\Scripts\activate
   ```

3. **Install dependencies**
   ```bash
   pip install -e .
   ```
   > Requires Python 3.12 or newer (see `pyproject.toml`).

4. **Configure environment variables**
   - `OPENAI_API_KEY` – used for the interpretation stage.
   - `MINERU_API_KEY` – used to access MinerU's PDF-to-Markdown API.
   - Optionally create a `.env` file in the project root — the script loads it automatically via `python-dotenv`.

---

## Usage Instructions

```bash
python main.py --pdf-url https://example.com/paper.pdf
```

Key options:

| Option | Description |
| --- | --- |
| `--pdf-url URL` | Fetch, convert, and analyse a remote PDF. |
| `--md-path PATH` | Skip MinerU and analyse an existing Markdown file. |
| `--mineru-timeout SECONDS` | Override the default 600s wait window for MinerU tasks. |

Run outputs:

- Converted content lives in `files/<slug_timestamp>/`
  - `<slug_timestamp>.pdf` – the original download
  - extracted Markdown (chooses the largest `.md` file returned by MinerU)
  - `interpretation_results.md` – question/answer report generated by the OpenAI workflow
- Process logs are appended to `chatpdf.log`.

Example session:

```bash
export OPENAI_API_KEY=sk-...
export MINERU_API_KEY=mu-...
python main.py --pdf-url https://cdn-mineru.openxlab.org.cn/demo/example.pdf
open files/example_20251105132210/interpretation_results.md
```

---

## Technologies Used

- **Python 3.12+**
- **MinerU API** – remote PDF-to-Markdown conversion
- **OpenAI API** – chunked question/answer synthesis
- **Requests** – HTTP interactions and retries
- **python-dotenv** – environment configuration management

---

## Visuals

| Stage | Screenshot / Placeholder |
| --- | --- |
| Conversion folder | `files/example_20251105132210/` showing PDF + Markdown + interpretations |
| Interpretation report | `files/.../interpretation_results.md` rendered in Markdown viewer |

> Add real screenshots under `docs/` (e.g. `docs/folder-structure.png`) and reference them above for a more compelling README.

---

## Badges

[![Python](https://img.shields.io/badge/python-3.12%2B-blue)](https://www.python.org/)
[![MinerU](https://img.shields.io/badge/MinerU-API-green)](https://mineru.net/)
[![Status](https://img.shields.io/badge/status-active-success)](#project-statusroadmap)
[![License](https://img.shields.io/badge/license-TBD-lightgrey)](#)

Update these badges once you wire in CI (e.g. GitHub Actions build and coverage).

---

## Project Status / Roadmap

- **Current state:** Active prototype – CLI-driven, single-question set, folder-per-document organisation.
- **Planned enhancements:**
  - optional YAML/JSON prompts to customise interpretation questions per run
  - richer MinerU options (batch mode, callbacks, language overrides)
  - automated tests & CI pipeline with coverage reporting
  - optional front-end (e.g. Streamlit) for non-CLI users
  - Docker packaging to bundle dependencies

Contributions and ideas are welcome via issues or pull requests.
